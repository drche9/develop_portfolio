#include<stdio.h>
#include<Windows.h>
#include<stdbool.h>
#define X 20
#define Y 20
//변하지 않는 상수

//움직일 수 있는 횟수 : 30
int map[Y][X] = {
{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
{1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,0,4,1},
{1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,1},
{1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1},
{1,1,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1},
{1,1,0,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1},
{1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,1,1},
{1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1},
{1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1},
{1,1,0,1,1,1,1,1,1,1,1,0,0,1,1,0,0,0,1,1},
{1,1,0,1,1,1,1,0,0,0,0,0,1,0,0,1,1,1,1,1},
{1,1,0,1,0,0,0,0,1,1,1,1,1,0,1,1,1,0,0,1},
{1,1,0,1,0,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1},
{1,1,0,1,0,1,0,0,0,1,1,1,0,1,1,1,1,0,1,1},
{1,1,0,1,0,1,0,1,0,0,0,0,0,1,1,0,0,0,1,1},
{1,1,0,1,0,1,0,1,0,1,1,0,1,1,1,0,1,1,1,1},
{1,0,0,1,0,0,0,1,0,1,1,0,1,1,1,0,1,1,1,1},
{1,1,0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,1},
{1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1},
{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
};

int EndingMap[Y][X] = {
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,1},
	{1,1,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,1},
	{1,1,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,1},
	{1,1,1,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,0,1,1,0,1,1,0,0,0,0,0,1,1,1},
	{1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1},
	{1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,1,1,1,1,1},
	{1,1,1,1,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
};

int Px = 10, Py = 10;
int Ax = 18, Ay = 1;
int number = 30;
int PlayerMove() {
	char key;
	printf("이동할 수 있는 횟수 : %d\n\n", number);
	printf("상 ↑ 하 ↓ 좌 ← 우 →");
	printf("이동할 방향을 입력해주세요 => ");
	scanf_s("%c", &key, 3);
	switch (key){
		case 'w' : 
			if (map[Py - 1][Px] != 1) {
				map[Py][Px] = 0;
				Py--;
				number--;
				if (number == 0) { //횟수 초과됬을때의 조건 
					system("pause");
					break;
				}
			}
			break;
		case 's':
			if (map[Py + 1][Px] != 1) {
				map[Py][Px] = 0;
				Py++;
				number--;
				if (number == 0) {
					system("pause");
					break;
				}
			}
			break;
		case 'a':
			if (map[Py][Px - 1] != 1) {
				map[Py][Px] = 0;
				Px--;
				number--;
				if (number == 0) {
					system("pause");
					break;
				}
			}
			break;
		case 'd':
			if (map[Py][Px + 1] != 1) {
				map[Py][Px] = 0;
				Px++;
				number--;
				if (number == 0) {
					system("pause");
					break;
				}
			}
			break;
		}
	map[Py][Px] = 3;
	map[Ay][Ax] = 4;
	}

int main() {
	map[Py][Px] = 3;
	while (1) {
		for (int i = 0; i < Y; i++) {
			for (int j = 0; j < X; j++) {
				switch (map[i][j]) {
				case 0: printf("□");
					break;
				case 1: printf("■");
					break;
				case 3: printf("☆");
					break;
				case 4: printf("◎");
					break;
				}
			}
			printf("\n");
		}
		PlayerMove();//플레이어 조종 함수
		system("CLS"); // 콘솔창 지우기
		if (map[Py][Px] == map[Ay][Ax]) {
			break;
		}

	}
	EndingMap[Y][X] = 0;
	for (int num = 0; num < 100; num++) {
		for (int i = 0; i < Y; i++) {
			for (int j = 0; j < X; j++) {
				switch (EndingMap[i][j]) {
				case 0: printf("□");
					break;
				case 1: printf("■");
					break;
				case 3: printf("☆");
					break;
				case 4: printf("◎");
					break;
				}
			}
			printf("\n");
		}
		system("CLS"); // 콘솔창 지우기
		printf("축하합니다! 미로를 탈출했습니다!\n");
	}
}